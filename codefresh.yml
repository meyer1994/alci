version: '1.0'

steps:
  clone:
    type: git-clone
    repo: 'meyer1994/alci'

  install:
    type: freestyle
    image: python:3.8-alpine
    working_directory: ./alci
    commands:
      - ls
      - pip install -r requirements.txt

  script:
    type: freestyle
    image: python:3.8-alpine
    working_directory: ./alci
    commands:
      - python main.py
      - flake8 --statistics *.py
      - coverage run --source=main -m unittest -vb test.py

  report:
    type: freestyle
    image: python:3.8-alpine
    working_directory: ./alci
    commands:
      - coverage report -m

  deploy:
    type: freestyle
    image: alpine
    commands:
      - apk add zip
      - zip pack.zip *.py
